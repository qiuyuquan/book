## 输入 url 浏览器发生了什么
1. dns域名解析
2. 建立tcp连接
3. 发送http请求
4. 服务器处理请求
5. 响应返回结果
6. 关闭tcp连接
7. 浏览器解析html
8. 浏览器布局渲染

#### 1. dns域名解析系统
1. 检查浏览器缓存是否有这个域名的解析过IP地址，有就返回
2. 检查操作系统是否有这个域名的Dns解析结果hosts，有就返回
3. 向本地区的域名服务器查询是否有这个域名解析的记录，（本地域名服务器一般都网络运营商提供）有就返回
4. 本地域名服务器向根DNS服务器查询，根域名服务器判断是那个主域名服务器（.com、.cn、.org），返回对应的主域名服务器地址
5. 本地域名服务器向上一步返回主域名服务器请求，主域名服务器根据域名查找对应IP地址，返回IP地址
6. 本地域名服务器缓存这个域名和对应的ip地址，并把解析结果返回用户
7. 用户将结果缓存本地系统缓存中
8. 域名解析完成

#### 2. 建立tcp连接
**序列号seq：** 用来标记数据段的顺序，报文段中携带数据的第一个字节的编号。随机
**确认号ack：** 期待收到对方下一个报文段中第一个数据字节的序号（序列号），一般是序列号+1即为确认号
**确认ACK：** 仅当ACK=1时，确认号字段才有效。ACK=0时，确认号无效
**同步标志位SYN** 连接建立时用于同步序号，当SYN=1，ACK=0时，表示是一个连接请求数据报文。若同意连接，则可以是响应文段中SYN=1，ACK=1。

1. 主机a向主机b发送tcp请求连接，其中包含主机a的初始序列号seq=x。（报文中同步标志文SYN=1，ACK=0，表示是一个tcp连接请求数据报文；seq表明传输数据时的第一个数据字节序号是x）
2. 主机b收到请求后，会发回连接确认数据包。（其中确认报文段中，标志文SYN=1，ACK=1表示是一个tcp连接响应数据报文；并包含了主机b的初始序列号seq=y，以及主机b对主机a初始序列号的确认号ack=seq + 1=x + 1）
3. 主机a收到主机b的确认报文后，还需做出解释，发送一个序号seq=x+1，确认号为ack=y+1的报文

**为什么需要第三次握手**
